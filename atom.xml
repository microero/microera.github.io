<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Microera的博客</title>
  <subtitle>Yanjun Wang</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://microera.github.io/"/>
  <updated>2017-09-13T02:56:04.429Z</updated>
  <id>https://microera.github.io/</id>
  
  <author>
    <name>Microera的博客</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Idea之安装激活</title>
    <link href="https://microera.github.io/2017/09/13/Idea%E4%B9%8B%E5%AE%89%E8%A3%85%E6%BF%80%E6%B4%BB/"/>
    <id>https://microera.github.io/2017/09/13/Idea之安装激活/</id>
    <published>2017-09-13T02:56:04.000Z</published>
    <updated>2017-09-13T02:56:04.429Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Oracle数据库之cmd命令清除注册表</title>
    <link href="https://microera.github.io/2017/09/13/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8Bcmd%E5%91%BD%E4%BB%A4%E6%B8%85%E9%99%A4%E6%B3%A8%E5%86%8C%E8%A1%A8/"/>
    <id>https://microera.github.io/2017/09/13/Oracle数据库之cmd命令清除注册表/</id>
    <published>2017-09-13T02:55:12.000Z</published>
    <updated>2017-09-13T02:55:12.035Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>申请属于自己的GitHub</title>
    <link href="https://microera.github.io/2017/09/13/%E7%94%B3%E8%AF%B7%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84GitHub/"/>
    <id>https://microera.github.io/2017/09/13/申请属于自己的GitHub/</id>
    <published>2017-09-13T02:54:36.000Z</published>
    <updated>2017-09-13T02:54:36.201Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>小乌龟之使用入门</title>
    <link href="https://microera.github.io/2017/09/13/%E5%B0%8F%E4%B9%8C%E9%BE%9F%E4%B9%8B%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/"/>
    <id>https://microera.github.io/2017/09/13/小乌龟之使用入门/</id>
    <published>2017-09-13T02:53:54.000Z</published>
    <updated>2017-09-13T02:53:54.550Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>小乌龟之安装配置</title>
    <link href="https://microera.github.io/2017/09/13/%E5%B0%8F%E4%B9%8C%E9%BE%9F%E4%B9%8B%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"/>
    <id>https://microera.github.io/2017/09/13/小乌龟之安装配置/</id>
    <published>2017-09-13T02:53:39.000Z</published>
    <updated>2017-09-13T02:53:40.024Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>hexo之常用命令</title>
    <link href="https://microera.github.io/2017/09/13/hexo%E4%B9%8B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>https://microera.github.io/2017/09/13/hexo之常用命令/</id>
    <published>2017-09-13T02:53:01.000Z</published>
    <updated>2017-09-13T02:53:01.127Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>hexo之配置简介</title>
    <link href="https://microera.github.io/2017/09/13/hexo%E4%B9%8B%E9%85%8D%E7%BD%AE%E7%AE%80%E4%BB%8B/"/>
    <id>https://microera.github.io/2017/09/13/hexo之配置简介/</id>
    <published>2017-09-13T02:52:41.000Z</published>
    <updated>2017-09-13T02:52:41.752Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>hexo博客安装配置</title>
    <link href="https://microera.github.io/2017/09/13/hexo%E5%8D%9A%E5%AE%A2%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"/>
    <id>https://microera.github.io/2017/09/13/hexo博客安装配置/</id>
    <published>2017-09-13T02:52:25.000Z</published>
    <updated>2017-09-13T02:52:25.947Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>winfrom/WPF之定时器</title>
    <link href="https://microera.github.io/2017/09/13/winfrom-WPF%E4%B9%8B%E5%AE%9A%E6%97%B6%E5%99%A8/"/>
    <id>https://microera.github.io/2017/09/13/winfrom-WPF之定时器/</id>
    <published>2017-09-13T02:51:59.000Z</published>
    <updated>2017-09-13T02:51:59.945Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Oracle数据库之安装配置</title>
    <link href="https://microera.github.io/2017/09/13/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B9%8B%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"/>
    <id>https://microera.github.io/2017/09/13/Oracle数据库之安装配置/</id>
    <published>2017-09-13T02:50:40.000Z</published>
    <updated>2017-09-13T02:50:40.102Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>SQL server2012安装配置</title>
    <link href="https://microera.github.io/2017/09/13/SQL-server2012%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/"/>
    <id>https://microera.github.io/2017/09/13/SQL-server2012安装配置/</id>
    <published>2017-09-13T02:50:03.000Z</published>
    <updated>2017-09-13T02:50:03.185Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>SQL server数据库链接配置</title>
    <link href="https://microera.github.io/2017/09/13/SQL-server%E6%95%B0%E6%8D%AE%E5%BA%93%E9%93%BE%E6%8E%A5%E9%85%8D%E7%BD%AE/"/>
    <id>https://microera.github.io/2017/09/13/SQL-server数据库链接配置/</id>
    <published>2017-09-13T02:49:25.000Z</published>
    <updated>2017-09-13T02:49:25.173Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JAVA之数据库连接</title>
    <link href="https://microera.github.io/2017/09/13/JAVA%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5/"/>
    <id>https://microera.github.io/2017/09/13/JAVA之数据库连接/</id>
    <published>2017-09-13T02:48:52.000Z</published>
    <updated>2017-09-13T02:48:52.106Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Android之另类if循环判断</title>
    <link href="https://microera.github.io/2017/09/13/Android%E4%B9%8B%E5%8F%A6%E7%B1%BBif%E5%BE%AA%E7%8E%AF%E5%88%A4%E6%96%AD/"/>
    <id>https://microera.github.io/2017/09/13/Android之另类if循环判断/</id>
    <published>2017-09-13T02:48:15.000Z</published>
    <updated>2017-09-13T02:48:15.748Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Android之Date控件</title>
    <link href="https://microera.github.io/2017/09/13/Android%E4%B9%8BDate%E6%8E%A7%E4%BB%B6/"/>
    <id>https://microera.github.io/2017/09/13/Android之Date控件/</id>
    <published>2017-09-13T02:47:36.000Z</published>
    <updated>2017-09-13T02:47:36.780Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Android之常用事件</title>
    <link href="https://microera.github.io/2017/09/13/Android%E4%B9%8B%E5%B8%B8%E7%94%A8%E4%BA%8B%E4%BB%B6/"/>
    <id>https://microera.github.io/2017/09/13/Android之常用事件/</id>
    <published>2017-09-13T02:47:15.000Z</published>
    <updated>2017-09-13T02:47:15.370Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Android之更新模块</title>
    <link href="https://microera.github.io/2017/09/13/Android%E4%B9%8B%E6%9B%B4%E6%96%B0%E6%A8%A1%E5%9D%97/"/>
    <id>https://microera.github.io/2017/09/13/Android之更新模块/</id>
    <published>2017-09-13T02:46:49.000Z</published>
    <updated>2017-09-13T02:46:49.621Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Android之框架xUtil入门</title>
    <link href="https://microera.github.io/2017/09/13/Android%E4%B9%8B%E6%A1%86%E6%9E%B6xUtil%E5%85%A5%E9%97%A8/"/>
    <id>https://microera.github.io/2017/09/13/Android之框架xUtil入门/</id>
    <published>2017-09-13T02:46:25.000Z</published>
    <updated>2017-09-13T02:46:25.071Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JAVA</title>
    <link href="https://microera.github.io/2017/08/27/JAVA/"/>
    <id>https://microera.github.io/2017/08/27/JAVA/</id>
    <published>2017-08-27T09:52:42.000Z</published>
    <updated>2017-08-27T09:52:42.400Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>权限树的使用</title>
    <link href="https://microera.github.io/2017/08/26/%E6%9D%83%E9%99%90%E6%A0%91%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
    <id>https://microera.github.io/2017/08/26/权限树的使用/</id>
    <published>2017-08-26T11:49:57.000Z</published>
    <updated>2017-08-26T11:55:32.274Z</updated>
    
    <content type="html"><![CDATA[<h1 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h1><p>权限加载/权限遍历/权限添加/权限删除</p>
<h2 id="权限树加载"><a href="#权限树加载" class="headerlink" title="权限树加载"></a>权限树加载</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">trevzqx.Nodes.Clear();//清空树节点</div><div class="line">           setTreeView(trevzqx, 0);//总权限树加载</div><div class="line">           trevzqx.ExpandAll();//展开根节点</div></pre></td></tr></table></figure>
<p>绑定数据库权限树加载<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line">/// &lt;summary&gt;</div><div class="line">      /// 加载权限</div><div class="line">      /// &lt;/summary&gt;</div><div class="line">      /// &lt;param name=&quot;sender&quot;&gt;&lt;/param&gt;</div><div class="line">      /// &lt;param name=&quot;e&quot;&gt;&lt;/param&gt;</div><div class="line">      //调用的时候parentId以0值开始 setTreeView(treeView1, 0);</div><div class="line">      private void setTreeView(TreeView tr1, int parentId)</div><div class="line">      &#123;            </div><div class="line">          string nihao = comboBox1.SelectedValue.ToString();</div><div class="line"></div><div class="line">          string sql = &quot;SELECT id,nodeName,parentId FROM TreeTest tt LEFT JOIN tb_user_type ty ON ty.btnid=tt.id WHERE ty.usertype=&apos;&quot; + nihao + &quot;&apos;and tt.parentId=&apos;&quot; + parentId + &quot;&apos;ORDER BY tt.id ASC&quot;;</div><div class="line">          // string sql = &quot;select * from tb_user_type ,TreeTest where parentId=&quot; + parentId;</div><div class="line"></div><div class="line">          DataTable ds = SqlHelper.ExecuteDataTable(sql);</div><div class="line">         </div><div class="line">          if (ds.Rows.Count &gt; 0)</div><div class="line">          &#123;</div><div class="line">              int pId = -1;</div><div class="line">              foreach (DataRow row in ds.Rows)</div><div class="line">              &#123;</div><div class="line">                  TreeNode node = new TreeNode();</div><div class="line">                  node.Text = row[&quot;nodeName&quot;].ToString();</div><div class="line">                  node.Tag = (int)row[&quot;id&quot;];</div><div class="line">                  pId = (int)row[&quot;parentId&quot;];</div><div class="line">                  if (pId == 0)</div><div class="line">                  &#123;</div><div class="line">                      //添加根节点</div><div class="line">                      tr1.Nodes.Add(node);</div><div class="line">                  &#125;</div><div class="line">                  else</div><div class="line">                  &#123;</div><div class="line">                      //添加根节点之外的其他节点</div><div class="line">                      RefreshChildNode(tr1, node, pId);</div><div class="line">                  &#125;</div><div class="line">                  //查找以node为父节点的子节点</div><div class="line">                  setTreeView(tr1, (int)node.Tag);</div><div class="line"></div><div class="line">              &#125;</div><div class="line">          &#125;</div><div class="line">          </div><div class="line">          </div><div class="line">      &#125;</div><div class="line"> </div><div class="line"></div><div class="line"> </div><div class="line">      //处理根节点的子节点</div><div class="line">      private void RefreshChildNode(TreeView tr1, TreeNode treeNode, int parentId)</div><div class="line">      &#123;</div><div class="line">          foreach (TreeNode node in tr1.Nodes)</div><div class="line">          &#123;</div><div class="line">              if ((int)node.Tag == parentId)</div><div class="line">              &#123;</div><div class="line">                  node.Nodes.Add(treeNode);</div><div class="line">                  return;</div><div class="line">              &#125;</div><div class="line">              else if (node.Nodes.Count &gt; 0)</div><div class="line">              &#123;</div><div class="line">                  FindChildNode(node, treeNode, parentId);</div><div class="line">              &#125;</div><div class="line">          &#125;</div><div class="line">      &#125;</div><div class="line">      //处理根节点的子节点的子节点</div><div class="line">      private void FindChildNode(TreeNode tNode, TreeNode treeNode, int parentId)</div><div class="line">      &#123;</div><div class="line"></div><div class="line">          foreach (TreeNode node in tNode.Nodes)</div><div class="line">          &#123;</div><div class="line">              if ((int)node.Tag == parentId)</div><div class="line">              &#123;</div><div class="line">                  node.Nodes.Add(treeNode);</div><div class="line">                  return;</div><div class="line">              &#125;</div><div class="line">              else if (node.Nodes.Count &gt; 0)</div><div class="line">              &#123;</div><div class="line">                  FindChildNode(node, treeNode, parentId);</div><div class="line"></div><div class="line">              &#125;</div><div class="line"></div><div class="line">          &#125;</div><div class="line">          </div><div class="line">      &#125;</div></pre></td></tr></table></figure></p>
<h2 id="权限遍历"><a href="#权限遍历" class="headerlink" title="权限遍历"></a>权限遍历</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">MenuDAL dal = new MenuDAL();</div><div class="line">           List&lt;MenuModel&gt; objList = dal.findMyObjByRoleId(((LoginForm)this.Owner).cbxtype.SelectedValue.ToString());</div><div class="line">           if (objList.Count &gt; 0)</div><div class="line">           &#123;</div><div class="line">               foreach (MenuModel obj in objList)</div><div class="line">               &#123;</div><div class="line">                   if (&quot;主页&quot; == obj.nodeName)</div><div class="line">                   &#123;</div><div class="line">                       this.tabPage1.Parent = tabControl1;                      </div><div class="line">                   &#125;</div></pre></td></tr></table></figure>
<h2 id="权限添加"><a href="#权限添加" class="headerlink" title="权限添加"></a>权限添加</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">/// &lt;summary&gt;</div><div class="line">       /// 添加权限</div><div class="line">       /// &lt;/summary&gt;</div><div class="line">       /// &lt;param name=&quot;sender&quot;&gt;&lt;/param&gt;</div><div class="line">       /// &lt;param name=&quot;e&quot;&gt;&lt;/param&gt;</div><div class="line">       private void btnAddTotal_Click(object sender, EventArgs e)//添加父节点</div><div class="line">       &#123;</div><div class="line">           if (tvquanxian.SelectedNode == null)</div><div class="line">           &#123;</div><div class="line">               MessageBox.Show(&quot;请选择权限&quot;);</div><div class="line">               return;</div><div class="line">           &#125;</div><div class="line">           /* if (string.IsNullOrEmpty(textBox1.Text.Trim()))//添加节点</div><div class="line">            &#123;</div><div class="line">                MessageBox.Show(&quot;请填写要添加的节点名称！&quot;);</div><div class="line">                return;</div><div class="line">            &#125;*/</div><div class="line">           string id = tvquanxian.SelectedNode.Tag.ToString();</div><div class="line">           string nihao = comboBox1.SelectedValue.ToString();</div><div class="line">           PermitModel obj = new PermitModel();</div><div class="line">           obj.usertype = nihao;</div><div class="line">           obj.btnid = id;</div><div class="line">           PermitDAL dal = new PermitDAL();</div><div class="line">           int num = dal.findObjCountByUserquanxian(obj);</div><div class="line">           if (0 == num)</div><div class="line">           &#123;</div><div class="line">               string sql = &quot;insert into tb_user_type values(newid(),&apos;&quot; + nihao + &quot;&apos;,&apos;&quot; + tvquanxian.SelectedNode.Tag.ToString() + &quot;&apos;&quot; + &quot;)&quot;;</div><div class="line">               id = (string)SqlHelper.ExecuteScalar(sql);</div><div class="line">               TreeNode node1 = new TreeNode();</div><div class="line">               node1.Tag = id;</div><div class="line">               node1.Text = tvquanxian.SelectedNode.Text.ToString();</div><div class="line">               trevzqx.Nodes.Clear();//清空树节点</div><div class="line">               setTreeView(trevzqx, 0);//总权限树加载</div><div class="line">               trevzqx.ExpandAll();</div><div class="line">               MessageBox.Show(&quot;添加权限成功！&quot;);</div><div class="line">           &#125;</div><div class="line">           else MessageBox.Show(&quot;添加失败，请核实后添加权限！&quot;);</div><div class="line">           </div><div class="line">           //tvquanxian.Nodes.Add(node1);</div><div class="line">           //textBox1.Text = &quot;&quot;;</div><div class="line">       &#125;</div></pre></td></tr></table></figure>
<h2 id="权限遍历删除"><a href="#权限遍历删除" class="headerlink" title="权限遍历删除"></a>权限遍历删除</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">/// &lt;summary&gt;</div><div class="line">       /// 删除权限</div><div class="line">       /// &lt;/summary&gt;</div><div class="line">       /// &lt;param name=&quot;sender&quot;&gt;&lt;/param&gt;</div><div class="line">       /// &lt;param name=&quot;e&quot;&gt;&lt;/param&gt;</div><div class="line">       private void btnDelete_Click(object sender, EventArgs e)</div><div class="line">       &#123;</div><div class="line">           if (trevzqx.SelectedNode == null)</div><div class="line">           &#123;</div><div class="line">               MessageBox.Show(&quot;请选择要删除的节点！&quot;);</div><div class="line">               return;</div><div class="line">           &#125;</div><div class="line">           //选中节点的主键id，也是其子节点的parentId</div><div class="line">           int id = (int)trevzqx.SelectedNode.Tag;</div><div class="line">           nodeDelete(id);</div><div class="line">           trevzqx.SelectedNode.Remove();</div><div class="line">       &#125;</div><div class="line">       //数据表中的数据的递归删除方法</div><div class="line">       public void nodeDelete(int id)</div><div class="line">       &#123;</div><div class="line">           string nihao = comboBox1.SelectedValue.ToString();</div><div class="line"></div><div class="line">           string sql = &quot;SELECT id,nodeName,parentId FROM TreeTest tt LEFT JOIN tb_user_type ty ON ty.btnid=tt.id WHERE ty.usertype=&apos;&quot; + nihao + &quot;&apos;and tt.parentId=&quot; + id;</div><div class="line">     </div><div class="line">          // string sql = &quot;select * from TreeTest where parentId=&quot; + id;</div><div class="line">           DataTable ds = SqlHelper.ExecuteDataTable(sql);</div><div class="line">           if (ds.Rows.Count &gt; 0)</div><div class="line">           &#123;</div><div class="line">               //有子节点</div><div class="line">               foreach (DataRow row in ds.Rows)</div><div class="line">               &#123;</div><div class="line">                   //先删除父节点</div><div class="line">                   string delete = &quot;delete from tb_user_type where usertype=&apos;&quot; + nihao + &quot;&apos;and btnid=&quot; + id;</div><div class="line">                   int k = SqlHelper.ExecuteNonQuery(delete);</div><div class="line">                   //查找子节点，删除</div><div class="line">                   int id1 = (int)row[&quot;id&quot;];</div><div class="line">                   nodeDelete(id1);</div><div class="line">               &#125;</div><div class="line">           &#125;</div><div class="line">           else</div><div class="line">           &#123;</div><div class="line">               //没有子节点</div><div class="line">               string delete = &quot;delete from tb_user_type where usertype=&apos;&quot; + nihao + &quot;&apos;and  btnid=&quot; + id;</div><div class="line">               int k = SqlHelper.ExecuteNonQuery(delete);</div><div class="line">               MessageBox.Show(&quot;删除成功&quot;);</div><div class="line">           &#125;</div><div class="line">       &#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      tags
    
    </summary>
    
    
      <category term="C#" scheme="https://microera.github.io/tags/C/"/>
    
      <category term="权限树" scheme="https://microera.github.io/tags/%E6%9D%83%E9%99%90%E6%A0%91/"/>
    
  </entry>
  
</feed>
